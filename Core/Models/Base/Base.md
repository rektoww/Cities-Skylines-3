# Документация по базовым моделям (Base Models)

Этот документ описывает абстрактные базовые классы, которые служат основой для большинства игровых объектов в симуляции.

## Глава 1: GameObject.cs

`GameObject` - это фундаментальный абстрактный класс для любого объекта, существующего в игровом мире. Он предоставляет базовые свойства, такие как идентификатор и позиция.

### Свойства

- **`Id`**: `int` (только для чтения)
  - Уникальный идентификатор объекта, который генерируется автоматически при создании.
- **`Name`**: `string`
  - Имя объекта, которое можно отображать в интерфейсе.
- **`X`**, **`Y`**: `int`
  - Координаты объекта на игровой карте.
- **`IsActive`**: `bool`
  - Флаг, указывающий, активен ли объект в данный момент.
- **`Position`**: `(int X, int Y)`
  - Кортеж для удобного получения и установки координат `X` и `Y` одновременно.

## Глава 2: Building.cs

`Building` - это абстрактный класс, наследуемый от `GameObject`, который служит базой для всех зданий в игре. Он определяет общие свойства и логику размещения на карте.

### Свойства

- **`Floors`**: `int` - Количество этажей в здании.
- **`Condition`**: `float` - Состояние здания (от 100.0 - идеально, до 0.0 - разрушено).
- **`Width`**, **`Height`**: `int` - Размеры здания в тайлах.
- **`BuildCost`**: `decimal` - Стоимость постройки здания.
- **`MaxOccupancy`**, **`CurrentOccupancy`**: `int` - Максимальная и текущая вместимость (например, для жителей или рабочих).
- **`GameMap`**: `GameMap` - Ссылка на игровую карту, на которой размещено здание.

### Методы

- **`TryPlace(int x, int y, GameMap map)`**: `bool`
  - Пытается разместить здание на указанных координатах. Возвращает `true` в случае успеха.
- **`OnBuildingPlaced()`**: `abstract void`
  - Абстрактный метод, который должен быть реализован в дочерних классах. Вызывается после успешного размещения здания.
- **`CanPlace(int x, int y, GameMap map)`**: `virtual bool`
  - Проверяет, можно ли разместить здание на указанных координатах (проверка границ карты, занятости тайлов и пригодности ландшафта).
- **`IsTileSuitableForBuilding(Tile tile)`**: `protected virtual bool`
  - Проверяет, подходит ли конкретный тайл для строительства (не гора, не вода и т.д.).
- **`OccupyTiles()`**: `protected virtual void`
  - "Занимает" тайлы на карте после размещения здания.

## Глава 3: Mob.cs

`Mob` (Mobile Object) - это абстрактный класс, наследуемый от `GameObject`, который является базовым для всех подвижных объектов в игре, таких как горожане или транспорт.

### Свойства

- **`GameMap`**: `GameMap` - Ссылка на игровую карту, на которой находится моб.

### Методы

- **`Move()`**: `abstract void`
  - Абстрактный метод для реализации логики передвижения. Должен быть переопределен в дочерних классах.
- **`MoveTo(int toX, int toY)`**: `protected bool`
  - Пытается переместить моба на новые координаты, если это возможно.
- **`CanMoveTo(int toX, int toY)`**: `protected bool`
  - Проверяет, может ли моб переместиться на целевые координаты.
- **`IsTilePassable(Tile tile)`**: `protected virtual bool`
  - Проверяет, является ли тайл проходимым (например, не гора и не вода).

## Глава 4: Transport.cs

`Transport` — это абстрактный класс, наследуемый от `Mob`. Он служит базой для всех движущихся транспортных средств в игре. Он содержит общую логику для перевозки пассажиров.

### Свойства

- `MaxCapacity`: `int` (только для чтения)
  - Максимальное количество пассажиров, которое может вместить транспорт (включая водителя).
- `Passengers`: `List<Citizen>` (только для чтения)
  - Список текущих граждан, находящихся внутри транспорта.
- `Speed`: `float` (только для чтения)
  - Скорость, с которой движется транспорт.
- `CanAcceptPassenger`: `bool` (только для чтения)
  - Флаг, возвращает true, если количество пассажиров меньше MaxCapacity.
### Методы
- `TryBoard(Citizen citizen)`: `virtual bool`
  - Базовая логика посадки гражданина в транспорт. Возвращает true в случае успеха.
- `TryDisembark(Citizen citizen)`: `virtual bool`
  - Базовая логика высадки гражданина из транспорта.

## Глава 5: PublicTransport.cs
`PublicTransport` — абстрактный класс, наследуемый от Transport. Он вводит логику движения по фиксированным маршрутам и является базой для таких транспортных средств, как `Bus`, `Tram` и т.д.

### Свойства
- `Route`: `List<Tile>`
  - Последовательность тайлов, по которым движется транспорт (точки маршрута).
- `NextWaypointIndex`: `int`
  - Индекс следующей точки в списке `Route`, к которой направляется транспорт.

## Глава 6: TransitStation.cs
`TransitStation` — это абстрактный класс, наследуемый от `Building`, который является основой для всех точек посадки и высадки пассажиров (автобусные остановки, трамвайные станции, вокзалы).

### Свойства
- `WaitingCitizens`: `List<Citizen>`
  - Список граждан, которые в данный момент ожидают транспорт на этой станции.
- `ServicedRoutes`: `List<PublicTransport>`
  - Список маршрутов общественного транспорта, которые проходят через эту станцию.

### Методы
- `AddWaitingCitizen(Citizen citizen)`: `void`
  - Добавляет гражданина в список ожидания.
- `RemoveWaitingCitizen(Citizen citizen)`: `bool`
  - Удаляет гражданина из списка ожидания (например, когда он сел в транспорт).
- `CanPlace(int x, int y, GameMap map)`: `virtual bool`
  - Должен быть переопределен в наследниках для проверки соответствия типу дороги/путей.