# ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–≤–µ—Ç–∫–∞ Finance)

## üéØ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. **–£–±—Ä–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ "‚è±Ô∏è –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ"**
   - –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ UI
   - –§—É–Ω–∫—Ü–∏—è `ProduceMines()` –æ—Å—Ç–∞–µ—Ç—Å—è –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ)

### 2. **–®–∞—Ö—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ**
   - –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–∞—Ä—Ç—ã —à–∞—Ö—Ç–∞ —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –≤ —Ü–µ–Ω—Ç—Ä–µ
   - –£–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç 15 –µ–¥–∏–Ω–∏—Ü —Ä–µ—Å—É—Ä—Å–æ–≤ (5 —Ç–∏–∫–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞)
   - –ì–æ—Ç–æ–≤–∞ –¥–ª—è —Å–±–æ—Ä–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞

### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üí∞ –ü—Ä–æ–¥–∞—Ç—å"**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è Owner
   - –î–∏–∞–ª–æ–≥ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üéÆ –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)

### –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
1. **–®–∞—Ö—Ç–∞ —É–∂–µ —Å—Ç–æ–∏—Ç** –≤ —Ü–µ–Ω—Ç—Ä–µ –∫–∞—Ä—Ç—ã
2. **–í –Ω–µ–π —É–∂–µ –µ—Å—Ç—å 15 –µ–¥–∏–Ω–∏—Ü** –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

### –®–∞–≥ 1: –°–æ–±—Ä–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã
1. –ö–ª–∏–∫–Ω—É—Ç—å –ø–æ —à–∞—Ö—Ç–µ –≤ —Ü–µ–Ω—Ç—Ä–µ –∫–∞—Ä—Ç—ã
2. –£–≤–∏–¥–µ—Ç—å: "–ù–∞–∫–æ–ø–ª–µ–Ω–æ: 15/100"
3. –ù–∞–∂–∞—Ç—å "Yes" –≤ –¥–∏–∞–ª–æ–≥–µ
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: +15 Steel –∏–ª–∏ Concrete –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
1. –ù–∞–∂–∞—Ç—å **üì¶ –†–µ—Å—É—Ä—Å—ã**
2. –£–≤–∏–¥–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –®–∞–≥ 3: –ü—Ä–æ–¥–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã
1. –ù–∞–∂–∞—Ç—å **üí∞ –ü—Ä–æ–¥–∞—Ç—å**
2. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ —Å–æ —Å–ø–∏—Å–∫–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
3. –í–≤–µ—Å—Ç–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (–∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å 0)
4. –ù–∞–∂–∞—Ç—å "–ü—Ä–æ–¥–∞—Ç—å"
5. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¥–µ–Ω—å–≥–∏ –∑–∞—á–∏—Å–ª–µ–Ω—ã –≤ –±—é–¥–∂–µ—Ç

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–Ω–∞–Ω—Å—ã
1. –ö–ª–∏–∫–Ω—É—Ç—å **üíµ** (—Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É)
2. –£–≤–∏–¥–µ—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç:
   - –î–æ—Ö–æ–¥—ã: "Sale: Steel x15"
   - –ù–æ–≤—ã–π –±—é–¥–∂–µ—Ç

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### PlaceInitialMine()
```csharp
private void PlaceInitialMine()
{
    if (CurrentMap == null) return;

    // –†–∞–∑–º–µ—â–∞–µ–º —à–∞—Ö—Ç—É –≤ —Ü–µ–Ω—Ç—Ä–µ –∫–∞—Ä—Ç—ã
    int centerX = CurrentMap.Width / 2;
    int centerY = CurrentMap.Height / 2;

    var mine = new Mine();
    if (mine.TryPlace(centerX, centerY, CurrentMap))
    {
        CurrentMap.Buildings.Add(mine);
        
        // –°—Ä–∞–∑—É –¥–æ–±—ã–≤–∞–µ–º 15 –µ–¥–∏–Ω–∏—Ü (5 —Ç–∏–∫–æ–≤ √ó 3 –µ–¥./—Ç–∏–∫)
        for (int i = 0; i < 5; i++)
        {
            mine.ProduceResources();
        }
        
        RefreshMap();
    }
}
```

### SellMaterials() —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
```csharp
[RelayCommand]
private void SellMaterials()
{
    try
    {
        var dialog = new Views.SellMaterialsDialog(_playerResources, _productionService);
        
        // –ù–∞—Ö–æ–¥–∏–º –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è Owner
        var mainWindow = Application.Current?.Windows.OfType<Window>()
                           .FirstOrDefault(w => w.IsActive) 
                       ?? Application.Current?.MainWindow;
        
        if (mainWindow != null)
        {
            dialog.Owner = mainWindow;
        }
        
        if (dialog.ShowDialog() == true && dialog.SoldSuccessfully)
        {
            OnPropertyChanged(nameof(CityBudget));
            MessageBox.Show(/* —É—Å–ø–µ—Ö */);
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show($"–û—à–∏–±–∫–∞: {ex.Message}", "–û—à–∏–±–∫–∞", ...);
    }
}
```

---

## üì¶ –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –≤ UI

### –ö–Ω–æ–ø–∫–∏:
1. **üß™ –¢–µ—Å—Ç** ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
2. **üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å** ‚Äî —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–¥–∞–Ω–∏—è
3. **üí∞ –ü—Ä–æ–¥–∞—Ç—å** ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥ –ø—Ä–æ–¥–∞–∂–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
4. **üì¶ –†–µ—Å—É—Ä—Å—ã** ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
5. **üíµ (—Å–ø—Ä–∞–≤–∞)** ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –±—é–¥–∂–µ—Ç / —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç (–∫–ª–∏–∫)

### –ú–µ–Ω—é –∑–¥–∞–Ω–∏–π:
- **–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ**: –ó–∞–≤–æ–¥, –§–µ—Ä–º–∞, **–®–∞—Ö—Ç–∞**
- **–ö–æ–º–º–µ—Ä—Ü–∏—è**: –ú–∞–≥–∞–∑–∏–Ω, –°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç, –ê–ø—Ç–µ–∫–∞, –ö–∞—Ñ–µ, –†–µ—Å—Ç–æ—Ä–∞–Ω, –ó–∞–ø—Ä–∞–≤–∫–∞
- **–°–æ—Ü–∏—É–º**: –®–∫–æ–ª–∞, –ë–æ–ª—å–Ω–∏—Ü–∞, –ü–∞—Ä–∫
- **–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç**: –ê—ç—Ä–æ–ø–æ—Ä—Ç, –ñ/–î –í–æ–∫–∑–∞–ª

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –£–≤–∏–¥–µ—Ç—å —à–∞—Ö—Ç—É –≤ —Ü–µ–Ω—Ç—Ä–µ –∫–∞—Ä—Ç—ã
3. –ö–ª–∏–∫–Ω—É—Ç—å –ø–æ –Ω–µ–π ‚Üí —Å–æ–±—Ä–∞—Ç—å 15 —Ä–µ—Å—É—Ä—Å–æ–≤
4. –ù–∞–∂–∞—Ç—å **üí∞ –ü—Ä–æ–¥–∞—Ç—å** ‚Üí –ø—Ä–æ–¥–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã
5. –ö–ª–∏–∫–Ω—É—Ç—å **üíµ** ‚Üí —É–≤–∏–¥–µ—Ç—å –¥–æ—Ö–æ–¥ –æ—Ç –ø—Ä–æ–¥–∞–∂–∏

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –®–∞—Ö—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ ‚úÖ
- –†–µ—Å—É—Ä—Å—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è ‚úÖ
- –î–∏–∞–ª–æ–≥ –ø—Ä–æ–¥–∞–∂–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚úÖ
- –î–µ–Ω—å–≥–∏ –∑–∞—á–∏—Å–ª—è—é—Ç—Å—è –≤ –±—é–¥–∂–µ—Ç ‚úÖ
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ ‚úÖ

---

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–∞—Ç—å" –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —É –∏–≥—Ä–æ–∫–∞ –µ—Å—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
- –ö–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç MessageBox —Å –æ—à–∏–±–∫–æ–π –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫

### –®–∞—Ö—Ç–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `CurrentMap` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –≤ `LoadStatic()`
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ü–µ–Ω—Ç—Ä –∫–∞—Ä—Ç—ã –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è

### –î–∏–∞–ª–æ–≥ –ø—Ä–æ–¥–∞–∂–∏ –ø—É—Å—Ç–æ–π:
- –°–Ω–∞—á–∞–ª–∞ —Å–æ–±—Ä–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã –∏–∑ —à–∞—Ö—Ç—ã (–∫–ª–∏–∫–Ω—É—Ç—å –ø–æ –Ω–µ–π)
- –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ—è–≤—è—Ç—Å—è –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ

---

–í—Å—ë –≥–æ—Ç–æ–≤–æ! üöÄ
